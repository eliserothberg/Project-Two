#!/usr/bin/env node

//var ?? = require('the email program');
var nodemailer = require('nodemailer');

  var transporter = nodemailer.createTransport('smtps://user%40gmail.com:pass@smtp.gmail.com');
//for loop to go over user list, filter for people who have events coming up
function email_function_will_go_here() {
    // console.log('I take care of the email functionality!');



// create reusable transporter object using the default SMTP transport

// setup e-mail data with unicode symbols
var mailOptions = {
    from: '"eMinder" <rothberg.elise@gmail.com>', // sender address
    to: "rothberg.elise@gmail.com", // list of receivers
    subject: 'You have an upcoming event', // Subject line
    text: '', // plaintext body
    html: '' // html body
};

// send mail with defined transport object
transporter.sendMail(mailOptions, function(error, info){
    if(error){
        return console.log(error);
    }
    console.log('Message sent: ' + info.response);
});

}
email_function_will_go_here();

//this is an ind program that connects and figures out what emails need to be sne then marks them as sent
// for ()

  // if (events.length>0){
  //       return findAssoc(events)
  //       .then(function(assoc){
  //         for (var j=0;j<events.length;j++){
  //           eventArray[j]=events[j].dataValues;
  //           // var lastEat=RowDataPacket.updatedAt;
  //           eventArray[j].event_date=string(eventArray[j].event_date).left(16).s;
  //           eventArray[j].gift_name=giftArray[j].gift_name;
  //           eventArray[j].max_price=giftArray[j].max_price;
  //           if (giftArray[j].purchased){
  //             eventArray[j].purchased='Yes';
  //           }else {
  //             eventArray[j].purchased='No';
  //           }
  //         // console.log('eventArray '+j);
  //         // console.log(eventArray[j].max_price);
  //         }
  //         if (eventArray.length>0){doThey=true};
  //         res.render('./gifts/index', {
  //           eventdisp:eventArray,
  //           username:email,
  //           logged_in: loggedIn,
  //           eventsExist:doThey,
  //           id:userId
  //         });
  //      });